---
title: "Practical Machine Learning Project"
author: "María Elena Cruz Martín"
output: html_document
---
```{r loadggplot, echo=FALSE,message=FALSE }
require(dplyr)
```

## Overview
Five different fashions for the Unilateral Dumbbell Biceps Curl have been considered:

* Class A:exactly according to the specification <- "OK"

* Class B:throwing the elbows to the front <- "NoOK"

* Class C: lifting the dumbbell only halfway <- "NoOK"

* Class D: lowering the dumbbell only halfway <- "NoOK"

* Class E: throwing the hips to the front <- "NoOK"

(Read more: http://groupware.les.inf.puc-rio.br/har#ixzz3mUfOAnhN)

Original paper: Velloso, E.; Bulling, A.; Gellersen, H.; Ugulino, W.; Fuks, H. Qualitative Activity Recognition of Weight Lifting Exercises. Proceedings of 4th International Conference in Cooperation with SIGCHI (Augmented Human '13) . Stuttgart, Germany: ACM SIGCHI, 2013.

Read more: http://groupware.les.inf.puc-rio.br/har#ixzz3mUvZoaRB

##Data cleaning and preparation

```{r loaddata, echo=FALSE, results='hide', cache=TRUE}
data_dir <- "."
training_file_name <- "pml-training.csv"
testing_file_name <- "pml-testing.csv"

training <- read.table(file=file.path(data_dir,training_file_name),sep=",", header=TRUE)
testing <- read.table(file=file.path(data_dir,testing_file_name),sep=",", header=TRUE)
```

From a brief preliminary analysis of the data, we identify some columns that are not relevant for the analysis, which are: X, user_name, raw_timestamp_part_1, raw_timestamp_part_2, cvtd_timestamp, new_window, and num_window. These columns will not be included in our analysis. 

```{r removesummaries , echo=FALSE, results='hide', cache=TRUE}
summary_patterns <- c("max", "min","stddev", "var", "avg", "kurtosis", "skewness")
summary_columns <- unlist(sapply(summary_patterns, grep, names(training)))
training_redux <- select(training, -summary_columns)
```

Besides, there are some columns that are 'summaries' of the 'raw data', that is, columns which contain the max, min, standard deviation, variance and standard deviation of the raw data. These columns have information that has been already included in the raw data information, so we will remove them in order to make our analysis simpler. We will remove the columns that contain the following patterns: `r summary_patterns`. This will allow us to remove `r length(summary_columns)` columns from the original dataset.

Finally, we detect there are many errors in the amplitude columns. The vast majority of values in these columns are either 0, #DIV/0! or empty. Thus, we also remove these columns, as they are clearly wrong.
```{r remove_amp_cols, echo=FALSE, results='hide', cache=TRUE}
amp_yaw_pattern <- c("amplitude_")
amp_yaw_columns <- grep(amp_yaw_pattern, names(training_redux))
training_redux <- select(training_redux, -amp_yaw_columns)
```

These filtering operations allow us having a clean dataset, with no NAs:
```{r showsummary, echo=FALSE, cache=TRUE}
summary(training_redux)
```

##Model selection

##Conclusions and results






